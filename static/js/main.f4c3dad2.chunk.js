(this["webpackJsonpcellular-automata"]=this["webpackJsonpcellular-automata"]||[]).push([[0],{13:function(e,t,a){},14:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(4),l=a.n(r),c=(a(13),a(1)),s=a(2),o=a.n(s),u=a(7),h=function(e){var t=Object(n.useState)(e),a=Object(c.a)(t,2),i=a[0],r=a[1],l=Object(u.a)({value:i,onChange:function(t){if("string"===typeof e)r(String(t.target.value));else if("number"===typeof i)r(Number(t.target.value));else{if("boolean"!==typeof i)throw Error("Wrong type at useInput");r(Boolean(t.target.value))}}},"number"===typeof i&&{type:"number"});return[i,l]},m=a(5),f=a(6),p=function(){function e(t){Object(m.a)(this,e),this.histogram=void 0,this.epoch=void 0,this.data=void 0,this.buffer=void 0,this.getRules=function(e){return function(t,a){var n=t.length-1,i=a===n?0:a+1,r=(t[0===a?n:a-1]<<2)+(t[a]<<1)+(t[i]<<0);return e>>r&1}},this.data=new Uint8Array(new ArrayBuffer(t.length)),this.buffer=new Uint8Array(new ArrayBuffer(t.length)),this.histogram=[],this.epoch=0;for(var a=0,n=0;n<this.data.length;++n)this.data[n]=t[n],this.data[n]&&++a;this.histogram[this.epoch]=a}return Object(f.a)(e,[{key:"newEpoch",value:function(e){this.epoch+=1;for(var t=0,a=this.getRules(e),n=0;n<this.buffer.length;++n)this.buffer[n]=a(this.data,n),this.buffer[n]&&++t;this.histogram[this.epoch]=t;var i=[this.buffer,this.data];this.data=i[0],this.buffer=i[1]}},{key:"createNewEpoch",value:function(e){var t=this,a=this.getRules(e);return this.data.map((function(e,n){return a(t.data,n)}))}},{key:"average",get:function(){for(var e=0,t=0;t<this.histogram.length;++t)e+=this.histogram[t];return e/this.histogram.length}},{key:"variance",get:function(){for(var e=this.average,t=0,a=0;a<this.histogram.length;++a)t+=(this.histogram[a]-e)*(this.histogram[a]-e);return t/this.histogram.length}}]),e}(),d=function(e,t,a,n,i,r){console.log("hey");var l=e.current,c=null===l||void 0===l?void 0:l.getContext("2d");if(l&&c){var s=new p(i);c.clearRect(0,0,l.width,l.height),c.fillStyle="white";for(var o=t,u=function(e){s.data.forEach((function(t,a){t&&c.fillRect(a*o,e*o,o,o)})),s.newEpoch(n)},h=0;h<a;++h)u(h);return r||function(e){var t=[{y:e,type:"bar",opacity:.9,marker:{color:"rgb(158,202,225)"}}];Plotly.newPlot("graph",t,{title:"Number of ones",showlegend:!1})}(s.histogram),s}},g=function(){var e=h(126),t=Object(c.a)(e,2),a=t[0],r=t[1],l=h(2),s=Object(c.a)(l,2),u=s[0],m=s[1],f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.6,a=Math.floor(window.innerWidth*t/e),n=(a-a%10)/10*10;return n}(u),p=h(f),g=Object(c.a)(p,2),b=g[0],v=g[1],y=Object(n.useState)([]),E=Object(c.a)(y,2),w=E[0],j=E[1],O=window.innerWidth<window.innerHeight,_=h(O?2*f:f),A=Object(c.a)(_,2),N=A[0],C=A[1],k=function(e){var t=Object(n.useState)(e),a=Object(c.a)(t,2),i=a[0],r=a[1];return[i,Object(n.useCallback)((function(){r((function(e){return!e}))}),[r])]}(!0),R=Object(c.a)(k,2),S=R[0],x=R[1],B="rgba(255, 255, 255, ".concat(S?.7:.1,")"),M={className:o.a.intenseButton,style:{backgroundColor:B}},I=Object(n.useRef)(null),D={width:u*b,height:u*N,className:o.a.display},F=Object(n.useRef)();Object(n.useEffect)((function(){S&&j(function(e){for(var t=new Array(e),a=0;a<t.length;++a)t[a]=0;return t[Math.floor(e/2)]=1,t}(b))}),[b,S]),Object(n.useEffect)((function(){S&&(F.current=d(I,u,N,a,w,S))}),[S,I,u,N,a,w]);return Object(n.useEffect)((function(){if(!S){var e=document.createElement("script");e.async=!0,e.src="https://cdn.plot.ly/plotly-latest.min.js",document.body.appendChild(e)}}),[S]),i.a.createElement("div",{className:o.a.app},i.a.createElement("main",{className:o.a.appMain},i.a.createElement("h2",null,"Cellular Automata"),i.a.createElement("section",{className:o.a.segment},i.a.createElement("div",{className:o.a.container},i.a.createElement("button",Object.assign({onClick:x},M),"Simple Mode ",S?"on":"off"," ")),i.a.createElement("div",{className:o.a.container},i.a.createElement("label",{htmlFor:"ruleID"},"Rule: "),i.a.createElement("input",Object.assign({id:"ruleID",min:"0",max:"255"},r)),i.a.createElement("label",{htmlFor:"cellSize"},"Size of cell: "),i.a.createElement("input",Object.assign({id:"cellSize",min:"1",max:"15"},m)),i.a.createElement("label",{htmlFor:"nCells"},"Number of cells: "),i.a.createElement("input",Object.assign({id:"nCells",min:"10",step:"10",max:"900"},v)),i.a.createElement("label",{htmlFor:"steps"},"Iterations: "),i.a.createElement("input",Object.assign({id:"steps",min:"10",step:"10"},C))),!S&&i.a.createElement("div",{className:o.a.container},i.a.createElement("input",{type:"file",id:"file",onChange:function(e){var t,a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(a){var n=new FileReader;n.readAsText(a),n.onload=function(e){var t,a=(null===(t=e.target)||void 0===t?void 0:t.result).split(",").map((function(e){return Number(e)}));v.onChange({target:{value:a.length}}),j(a)}}}}),i.a.createElement("button",{onClick:function(){return d(I,u,N,a,w,S)}},"Simulate automata")),i.a.createElement("canvas",Object.assign({ref:I},D))),i.a.createElement("hr",{style:{visibility:S?"hidden":"initial",width:"80%",borderWidth:"0.1rem"}}),i.a.createElement("section",{className:o.a.segment,style:{visibility:S?"hidden":"initial"}},i.a.createElement("h2",null,"Analysis"),F.current&&i.a.createElement("div",{className:o.a.analysisData},i.a.createElement("p",null,"Average: ",F.current.average),i.a.createElement("p",null,"Variance: ",F.current.variance," ")),i.a.createElement("div",{id:"graph"}))))},b=document.getElementById("ReactApp");l.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(g,null)),b)},2:function(e,t,a){e.exports={app:"App_app__3UCIE",appMain:"App_appMain__19oKc",segment:"App_segment__1PnTC",analysisData:"App_analysisData__3OqfA",container:"App_container__3twmq",display:"App_display__1-wtw",intenseButton:"App_intenseButton__wA0VR"}},8:function(e,t,a){e.exports=a(14)}},[[8,1,2]]]);
//# sourceMappingURL=main.f4c3dad2.chunk.js.map